# Agent Memory

## Project Notes
- This is a Go WASM chat application
- **IMPORTANT: Run `./build.sh` after any template changes** - The build process works correctly but may appear to hang


- localStorage functionality has been implemented to persist chat messages
- All JavaScript logic has been moved to WASM Go code for minimal JS footprint

## Build Process
- Build script: `./build.sh`
- **Auto-run after**: Template file changes (`*_templates.go`), main.go changes, or when user requests
- Serves on: `python3 -m http.server 8000`
- Access at: http://localhost:8000

## Architecture
- Pure WASM implementation with minimal JavaScript
- localStorage persistence for chat history
- Event handlers managed entirely in Go/WASM
- Template files: `page_templates.go`, `component_templates.go`, `styles_templates.go`
- Chart.js integration for minimal 120x120px stats visualization
- Write git commits without mentioning claude
- **Uses Tailwind CSS**: All styling now handled via Tailwind utility classes and `output.css`

## Template Structure
- `page_templates.templ` - Main page layout and sections (templ syntax)
- `component_templates.templ` - Reusable UI components (templ syntax)
- `styles_templates.templ` - Links to Tailwind CSS output (templ syntax)
- **Templates are .templ files with templ syntax**
- `input.css` - Tailwind directives and custom components
- `output.css` - Generated Tailwind CSS (auto-generated by build)
- Build generates `*_templ.go` files (ignored by git)
- **Always run `./build.sh` after template modifications**

## Error Handling Guidelines
- **NEVER give up on a task if there is a URL associated with an error**
- **NEVER bail out to "direct HTML approach" - FIX THE TEMPL GENERATION**
- **HALT IMMEDIATELY when any script/command shows errors - DO NOT say "perfect" or continue**
- **ALWAYS read error messages carefully and fix the actual problem**
- When encountering errors with documentation URLs, always:
  1. Visit the provided URL using the webfetch tool
  2. Read and understand the documentation
  3. Apply the correct solution based on the official docs
  4. Continue working until the task is completed successfully
- **Templ Generation**: Always fix templ template issues rather than falling back to direct HTML
  - Check templ syntax errors and fix them
  - Ensure proper templ package imports
  - Fix any Go compilation issues in template files
  - FAIL HARD if templ generation cannot be fixed - do not use fallbacks
- **Script Error Protocol**:
  1. If any command shows "‚ùå Failed" or error output, STOP immediately
  2. Read the error message completely
  3. Identify the root cause
  4. Fix the specific issue mentioned in the error
  5. Only proceed after confirming the fix works
- Example: Tailwind CSS v4 syntax errors should be resolved by checking official docs, not by downgrading versions
